fragment CardCommonFields on Card {
  id
  content
  solved
  listId
  boardId
  author {
    displayName
  }
  likes {
    authorId
  }
}

fragment ListCommonFields on List {
  id
  name
  index
  boardId
}

query FetchBoard($id: ID!) {
  board(id: $id) {
    id
    name
    lists {
      ...ListCommonFields
      cards {
        ...CardCommonFields
      }
    }
  }
}

mutation CreateList($list: CreateListInput!) {
  createList(list: $list) {
    ...ListCommonFields
  }
}

mutation CreateCard($card: CreateCardInput!) {
  createCard(card: $card) {
    ...CardCommonFields
  }
}

mutation UpdateCard($card: UpdateCardInput!) {
  updateCard(card: $card) {
    content
  }
}

mutation RemoveCard($id: ID!) {
  removeCard(id: $id) {
    id
    listId
  }
}

mutation AddCardLike($like: AddCardLikeInput!) {
  addCardLike(like: $like)
}

mutation RemoveCardLike($cardId: ID!) {
  removeCardLike(cardId: $cardId)
}

mutation UpdateList($list: UpdateListInput!) {
  updateList(list: $list) {
    name
  }
}

mutation RemoveList($listId: ID!) {
  removeList(listId: $listId) {
    id
  }
}

subscription BoardUpdated($boardId: ID!) {
  boardUpdated(boardId: $boardId) {
    ... on CardCreated {
      payload {
        ...CardCommonFields
      }
    }
    ... on CardUpdated {
      payload {
        ...CardCommonFields
      }
    }
    ... on CardRemoved {
      payload {
        id
      }
    }
    ... on CardLikeAdded {
      payload {
        cardId
        authorId
      }
    }
    ... on CardLikeRemoved {
      payload {
        cardId
        authorId
      }
    }
    ... on ListCreated {
      payload {
        ...ListCommonFields
      }
    }
    ... on ListUpdated {
      payload {
        ...ListCommonFields
      }
    }
    ... on ListRemoved {
      payload {
        id
      }
    }
  }
}
